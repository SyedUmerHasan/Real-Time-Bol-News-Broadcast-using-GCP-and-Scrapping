<!doctype html>
<html lang="en">

<head>
	<title>Title</title>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>

	<nav class="navbar navbar-expand-sm navbar-dark bg-dark">
		<a class="navbar-brand" href="#">Portfolio</a>
		<button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId"
			aria-controls="collapsibleNavId" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="collapsibleNavId">
			<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
				<li class="nav-item active">
					<a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">My Link</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-toggle="dropdown"
						aria-haspopup="true" aria-expanded="false">Dropdown</a>
					<div class="dropdown-menu" aria-labelledby="dropdownId">
						<a class="dropdown-item" href="#">Action 1</a>
						<a class="dropdown-item" href="#">Action 2</a>
					</div>
				</li>
			</ul>
			<form class="form-inline my-2 my-lg-0">
				<input class="form-control mr-sm-2" type="text" placeholder="Search">
				<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
			</form>
		</div>
	</nav>

	<div class="row">
		<br>
	</div>

	<div class="row">
		<div class="offset-md-2 offset-sm-1"></div>
		<div class="col-md-8 col-sm-10">
			<div class="jumbotron">
				<div class="container" style="width: 100%;">
					<div class="row">
						<h1 style="margin: auto; width: 60%;  color : rgb(0, 91, 211);" class="text-center"><b>Welcome
								to My RSS News Feed</b>
						</h1>
					</div>
					<br>
					<div class="row">
						<div style="margin: auto; width: 80%; align-content: center; " class="text-center">This site has
							a lot of news feed that are just downloaded in real time from differnt sites.This site has a
							lot of news feed that are just downloaded in real time from differnt sites.</div>
					</div>
					<br>
					<div class="row">
						<div class="col-md-3"><br></div>
						<div class="col-md-3 text-center" style="margin: auto; text-align:center;">
							<a name="" id="" class="btn btn-primary btn-lg" href="#" role="button">Check News</a>
						</div>
						<div class="col-md-3 text-center" style="margin: auto;text-align:center;">
							<a name="" id="" class="btn btn-secondary btn-lg" href="#" role="button">Create News</a>
						</div>
						<div class="col-md-3"><br></div>
					</div>
				</div>
			</div>
		</div>
		<div class="offset-md-2 offset-sm-1"></div>
	</div>

	<div class="row">
		<div class="container">
			<div class="row" id="newsCards">

			</div>
		</div>


		<div id="umer"></div>

	</div>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>



	<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>

	<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-analytics.js"></script>

	<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>

	<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>

	<script>
		// Your web app's Firebase configuration
		var firebaseConfig = {
			apiKey: "AIzaSyB0Awo8vuy1u4dgLhQo1n6JsIvwRWGfEw8",
			authDomain: "practice1-27a5a.firebaseapp.com",
			databaseURL: "https://practice1-27a5a.firebaseio.com",
			projectId: "practice1-27a5a",
			storageBucket: "practice1-27a5a.appspot.com",
			messagingSenderId: "806101109608",
			appId: "1:806101109608:web:7faa9739667e13b2b3a4dd",
			measurementId: "G-QV5WNKPZF6"
		};
		// Initialize Firebase
		firebase.initializeApp(firebaseConfig);
		firebase.analytics();
	</script>
	<!-- <script>
	var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>",
	xmlDoc = $.parseXML( xml ),
	$xml = $( xmlDoc ),
	$title = $xml.find( "title" );
	</script> -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script>

		async function myfunction(lucky) {
			for (const eachData in lucky) {
				let element = await lucky[eachData].elements;
				sampleArray[sampleIteration++] = await filterTitle(element)
			}
			// AddContainer(sampleArray);
			console.log(sampleArray)
			for (const eachItem in sampleArray) {
				console.log(sampleArray[eachItem])
				await getImage(sampleArray[eachItem]["link"])
				AddContainer(sampleArray[eachItem])
			}
		}
		function getImage(myurl) {
			$.ajax({
				url: "http://localhost:5001/firstproject-aa4e6/us-central1/scrapper",
				type: 'GET',
				data: { obj: JSON.stringify(myurl) },
				success: async function (data, textStatus, xhr) {
					console.log(data);
				},
				error: function (xhr, textStatus, errorThrown) {
					console.log(errorThrown);
				}
			});
		}
		function AddContainer(eachElement) {
			document.getElementById("newsCards").innerHTML += '<div class="col-md-4"> <div class="card" ><img class="card-img-top" src="https://images.unsplash.com/photo-1573311568869-7aea30da5cb7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60" alt=""><div class="card-body"><h5 class="card-title"> ' + "<a href=" + eachElement.link + ">" + eachElement.title + "</a>" + ' </h5><p class="card-text">' + eachElement.description.substring(0, 100) + '</p></div></div></div>';
		}
	</script>
	<script>
		let myData = {}
		let sampleArray = {}
		let sampleIteration = 0;
		let URL = "http://localhost:5001/firstproject-aa4e6/us-central1/app/api";
		$(document).ready(() => {
			$.ajax({
				url: URL,
				type: 'GET',
				success: async function (data, textStatus, xhr) {
					myData = await data["elements"][0]["elements"][0]["elements"]
					var lucky = myData.filter(function (eachdata) {
						if (eachdata.name == "item")
							return eachdata.elements[0]
					});
					myfunction(lucky);
				},
				error: function (xhr, textStatus, errorThrown) {
					console.log(errorThrown);
				}
			});

		});
		async function filterTitle(element) {
			let tempSampleArray = []
			for (const eachElement in element) {
				if (element[eachElement].name == "title") {
					tempSampleArray["title"] = await element[eachElement].elements[0].text;
				}
				else if (element[eachElement].name == "link") {
					tempSampleArray["link"] = await element[eachElement].elements[0].text;
				}
				else if (element[eachElement].name == "comments") {
					tempSampleArray["comments"] = await element[eachElement].elements[0].text;
				}
				else if (element[eachElement].name == "pubDate") {
					tempSampleArray["pubDate"] = await element[eachElement].elements[0].text;
				}
				else if (element[eachElement].name == "description") {
					tempSampleArray["description"] = await element[eachElement].elements[0].cdata;
				}
			}
			return await tempSampleArray

		}
	</script>

</body>

</html>